* COMO SIGO:
** TODO footer en planillas y contrato, ponerlo al final de hoja
** REPORTES:
*** TODO contrato mutuo, falta completar la tasa de interes (espero respuesta de jose para ver como)
*** TODO planilla pagos: Agregar pagos existentes
*** segun el reporte, pedir la fecha, cargar la tabla y mostrar el reporte
no se como hacer para que el dialogo con la fecha invoque el opentableview
*** DONE creditos terminados con saldo pendiente
*** DONE 901 Perdida por Incobrable
*** DONE recaudacion potencial
*** DONE Indicadores / Indicadores
*** DONE Recaudación / Recaudación Mensual
*** DONE Cartera / Cheques entregados
*** DONE recaudacion potencial por barrio
*** DONE "402 creditos activos","Creditos activos" ?
*** DONE "700 Recaudacion F","Real Total" ?
*** DONE "700 Recaudacion por barrio F","Real por Barrio" ?
*** "qCarteraAFecha por barrio F","Por Barrio" ?
*** "501 saldo F","Por Beneficiaria" ?
*** "800 Monto promedio de pago F","Monto promedio pagado en la vida del credito" ?
*** "900 pagos CONAMI","Recaudaci�n Conami por beneficiaria" ?
*** resolver si usar tabla parameter
*** ver como mostrar totales para indicadores
*** ver como asociar una clase a una vista en vez de tabla
*** agregar cabecera y pie de pagina en contrato mutuo
** PAGOS:
*** TODO imitar la consulta de pagos por fecha y barrio (agregar barrio a la tabla de pagos, crear vista)
** ALL:
*** TODO cuando se agrega un id repetido (ej amortizacion repetida), no muestra mensaje de error (solo x consola), la muestra en el table view como si se hubiera agregado pero no se agrega.
IntegrityError: (IntegrityError) (1062, "Duplicate entry 'Aleman' for key 'nombre'") 'INSERT INTO amortizacion (nombre) VALUES (%s)' ('Aleman',)

* DEPLOYMENT
python installer http://www.python.org/ftp/python/2.7.2/Python-2.7.2.tar.bz2
mysql installer 
full http://linorg.usp.br/mysqlDownloads/MySQLInstaller/mysql-installer-5.5.19.0.msi
en windows el mysql installer requiere .NET framework 4.0 http://go.microsoft.com/fwlink/?LinkId=181012
only engine http://mysql.cce.usp.br/Downloads/MySQL-5.5/mysql-5.5.19-win32.msi
pyqt http://www.riverbankcomputing.co.uk/static/Downloads/PyQt4/PyQt-Py2.7-x86-gpl-4.8.6-1.exe
camelot egg (instala sqlalchemy y elixir)
sqlalchemy source http://ufpr.dl.sourceforge.net/project/sqlalchemy/sqlalchemy/0.7.3/SQLAlchemy-0.7.3.tar.gz
windows mysql-python
cuando instalo un egg, primero desinstala si ya fue instalado
* PREGUNTAS:
** FUNCIONALES
*** preguntar como workaroundear el hecho de que no puedo ordenar columnas por properties, dado que deja cliquear y da al usuario la idea de que hace algo.
*** como pido confirmacion antes de eliminar?
*** como guardar preferencias de impresion (me parece que se setea con la impresora)
*** como visualizar un form desde otro (model_run)
        camelot.admin.action.application_action.OpenTableView(self.app_admin.get_entity_admin(Beneficiaria))
*** TODO How can I set a default value for a filter?
        list_filter = [ComboBoxFilter('activa', default=True)]
esto esta roto ahora pero fixed en trunk
Cuando salga el nuevo release, usar este feature.
*** se pueden hacer filtros por property en vez de columnproperty?
*** como puedo buscar por beneficiarias en pagos
*** como setear el ENGINE de mysql en InnoDB en vez de MyIsam (para soportar integridad referencial)
  http://dev.mysql.com/doc/refman/5.1/en/storage-engine-setting.html
  probe declarar en la clase del entity
    __table_args__ = {'mysql_engine':'InnoDB'}
  pero no funciono
*** como impedir la vista de formulario en un table view
*** como hacer el table view read only y el form editable.
*** si tengo un mapeo a un view que existe en la db, lo trato como tabla? si es asi, como evito que la cree.
creo que con el parametro autoload=True en using_options
** MISC
*** bug cuando hay muchos campos y doy clic en la lupa, la ventana se ensancha demasiado
*** no puedo hacer que aparezcan la cabecera y pie de pagina en reportes
*** como hacer andar las teclas de flecha en camelot_manage console
*** como setear un nombre al reporte cuando se imprime a pdf
** ESTETICAS
*** como modificar la ubicacion de las actions
*** como setear el ancho de los campos en table view
*** como evito mostrar el id en el titulo del form?
*** como centrar campos en table view (especialmente booleans)
*** como agregar una imagen al tab de home, o quitarla del todo
** DONE como filtrar por @property (al parecer no se puede)
  http://groups.google.com/group/project-camelot/browse_thread/thread/4e86d969bb997c0f

** PARA M2000
*** el cdi se va a seguir usando? porque se guarda en el campo comentario, entonces asignarle un campo.
*** Planilla de pagos: 
1. Que significa el 0.5 en la celda M1? Veo que se usa para
cuota_calculada, pero no entiendo bien. Esto es lo que te contamos del redondeo. hicimos una celda de ajuste para que la cuota no quede con centavos raros y sea mas facil cobrar.
2. total_deuda_final, de donde sale el 4.87? Esto es lo que falta para cancelar el credito por haber usado el redondeo.
TODO no entiendo.
3. deuda_inicial es el monto del prestamo? Si es el monto del prestamo + el saldo que le hubiera quedado del credito anterior. A veces lo que hacen es renuevan anticipadamente entonces agregamos el saldo al nuevo credito.
ACLARACION: en la planilla la deuda inicial no es el monto del prestamo + saldo sino monto_cheque + saldo.
La planilla de cobro modelo es distinta a la posta (tambien es conami), cual debo usar?
*** en contrato mutuo esta fija la tasa de interes en 0.5, como saco la cuenta?
Contrato mutuo:
1. En la clausula 2, dice "un medio por ciento (0,5%) mensual en
concepto de tasa de interes"Esta tasa no depende acaso del credito? Es verdad, este porcentaje depende del numero del interes (que esta atado al nro de credito) y del plazo en semanas.
*** estado de credito para que se usa?
*** las fechas de pago corresponden a viernes o sabado?
*** en el contrato mutuo, la fecha de la primera cuota se corresponde con la fecha de cobro? ahora es fecha_entrega+14
*** DONE en que categoria van los nuevos reportes 'perdida por incobrable' y 'finalizados sin saldar'?
*** DONE de la planilla de cobro, 
* FUTURE
** enforzar primary key compuesto en rubro.
** eliminar views de la db, reemplazarlos por sqlalchemy (sobre todo para evitar el uso de tablas parameter y fecha)
** agregar tests
* ENHANCEMENTS:
** validadores de forms
** agregar coordinadores de grupos
** agregar diccionario (ayuda) con definiciones de formulas y comportamiento. (documentacion con sphinx?)
** keyboard navigation
** en planilla de pagos, agregar los pagos que se realizaron
** reutilizar html en planillas de pagos (css?)
** crear form validators personalizados. Ahora aparece un mensaje de error en ingles si falta un campo requerido, por ejemplo.
** traducir a castellano
** agregar una imagen al tab de home
** en reportes, inhabilitar boton new
** poder inhabilitar boton de crear nuevo credito en pago
** agregar historial de cambios? (provisto por camelot)
** al eliminar una actividad con rubros asociados, muestra un mensaje muy feo. mejorarlo
** pedir confirmacion al eliminar registros.
* CHECKLIST FINAL
* COSAS A MOSTRAR
** como abrir en nueva pestaña
** como filtrar (incluyendo busqueda con lupa), aclarar que se pueden especificar por cuales campos buscar por defecto
** como ordenar por columna asc/desc
** como hacer un backup/restore
** como exportar a excel
** como dar de alta
** como eliminar
** como imprimir a pdf
** como colocar una foto a la beneficiaria
** como actualizar nueva version
** aclarar que la 1ra vez tarda
** aclarar que la busqueda es por nombre o apellido beneficiaria, pero no los dos
** documentacion a completar
* TIPS
** puedo usar @property en vez de @ColumnProperty, salvo que quiera incluir el campo en un filtro
** para que el form sea no editable
http://downloads.conceptive.be/downloads/camelot/doc/sphinx/build/api/admin/not_editable_admin.html
** para setupear camelot_manage
~/projects/m2000/m2000$ export PYTHONPATH=/home/fran/projects/m2000/m2000
~/projects/m2000/m2000$ camelot_manage console
** el default location para backups:
  ./home/fran/.local/share/data/Conceptive Engineering/Mujeres 2000 - Gestión de Créditos/backups/-11_19_11_12_07_PM.db
** agregar un form_display a la clase admin para definir el form
  http://downloads.conceptive.be/downloads/camelot/doc/sphinx/build/doc/object_admin.html
** para validar un cambio, usar validators
  http://downloads.conceptive.be/downloads/camelot/doc/sphinx/build/doc/validators.html   

** para agregar un launcher en ubuntu
copiar el file m2000.desktop en /usr/share/applications
** para impedir que se abra el form view, en la clase admin definir
        list_action = NoAction
aunque esto resulta en una exception
** para abrir un form maximizado, setear en admin:  form_state = 'maximized'

** para ajustar mejor el ancho de las columnas
modifique los fuentes en view/controls/tableview.py
    @QtCore.pyqtSlot()
    @gui_function
    def tableLayoutChanged( self ):
        logger.debug('tableLayoutChanged')
        model = self.table.model()
        if self.header:
            self.header.setNumberOfRows( model.rowCount() )
        item_delegate = model.getItemDelegate()
        if item_delegate:
            self.table.setItemDelegate( item_delegate )
        #self.table.resizeColumnsToContents()
        for i in range( model.columnCount() ):
            self.table.setColumnWidth( i, model.headerData( i, Qt.Horizontal, Qt.SizeHintRole ).toSize().width() * 0.7)

** si se produce un error al cargar la foto de una beneficiaria, se rompe el form (no andan los validadores)
** para preservar los formatos al exportar a excel, definir los delegates
** para el archivo de configuracion pude haber usado camelot.core.conf
** ordenamiento por properties en tableview no funciona. es asi por diseno
https://groups.google.com/group/project-camelot/browse_thread/thread/4e86d969bb997c0f/88b71699cd831a87?hl=es&ie=UTF-8&q=tableview+order+by+property+camelot&pli=1#88b71699cd831a87
* BUGS
** CAMELOT
*** default values en forms no me los toma
*** list_action = None es ignorado en embedded admins (ver rubro en actividad, pago en credito)
*** en expanded_list_search no me incluye los campos de foreign key (ej creditos x beneficiarias.nombre)
http://downloads.conceptive.be/downloads/camelot/doc/sphinx/build/doc/entity_admin.html
*** cuando se escribe un valor en un filtro de table view y se empiezan a filtrar, al llegar a 0 resultados, si se vuelve atras con backspace, no aparece la 1ra columna con la carpetita. Es necesario clic en la escoba.
* NOTAS SOBRE LOS DATOS:
** cambie los nombres de campos de la tabla asistencia:
*** descripcion por codigo
*** comentario por descripcion
** tabla estadocredito: elimine el campo cuotas_adeudadas_max por innecesario.
** El barrio delfino esta en la ciudad General Pacheco, y no en 'INCOMPLETO'
** para importar las beneficiarias:
en vim :%s/\(^\d\+;\)\(1\);/\1Troncos;/

** reporte de cheques entregados, hay duplicados?
* OBSERVACIONES
** TODO en access la carga de pagos esta restringida a un barrio y fecha por vez. Para la fecha elegida, se listan todos los creditos que deberian cargarse.
Esto no va mas, preguntar si aun desean la carga semanal
* CAMBIOS EN DB
** vistas renombradas
100 qTotalPagos ant -> 100_credito_pagos
100 qTotalPagos -> 100_credito_total_pagos
101 qIndicadores -> 101_indicadores
700 Recaudacion por cartera -> 700_recaudacion_x_cartera
403 Creditos entregados-> 403_creditos_entregados AS
210 pagos -> 210_pagos
700 Recaudacion por barrio F -> 700_recaudacion_x_barrio
701 Recaudacion Potencial por barrio -> 701_recaudacion_potencial_x_barrio
702 Recaudacion Potencial por barrio F -> 702_recaudacion_potencial_x_barrio
702 Recaudacion Potencial F -> 702_recaudacion_potencial
701 Recaudacion Potencial -> 701_recaudacion_potencial
700 Recaudacion F -> 700_recaudacion
402 Creditos activos -> 402_creditos_activos
901 Perdida por Incobrable -> 901_perdida_x_incobrable
** CAMBIOS EN QUERIES
[210 pagos] era una agrupacion, ahora toma directamente de tabla pagos. ver si esta bien 
702 recaudacion potencial por barrio hace join con 803 asistencia. no tiene sentido si es potencial, no incluye pagos.
402 creditos activos ya no depende de la fecha de corte
* LINKS DE INTERES
** gui refresh
http://groups.google.com/group/project-camelot/browse_thread/thread/374566244b2aeb91
http://groups.google.com/group/project-camelot/browse_thread/thread/31c3c42e133a1ad7

** unicode
http://groups.google.com/group/project-camelot/browse_thread/thread/6dfcd912b68c4c3c

** eventos:
http://downloads.conceptive.be/downloads/camelot/doc/sphinx/build/doc/calculated_fields.html

** custom forms
http://groups.google.com/group/project-camelot/browse_thread/thread/d30f371612d29591
** jinja
http://jinja.pocoo.org/docs/tricks/
** otros
http://groups.google.com/group/project-camelot/browse_thread/thread/2ee97d27d03b4df7/a7cc11a016c8e705#a7cc11a016c8e705
http://groups.google.com/group/project-camelot/browse_thread/thread/84e616d32b98f604/b2c48861ed346592?show_docid=b2c48861ed346592

Ver de bajarme el libro de oreily essential sqlalchemy

** deploy
setuptools  http://peak.telecommunity.com/DevCenter/setuptools
http://pypi.python.org/pypi?%3Aaction=list_classifiers

python mysql 
http://stackoverflow.com/questions/645943/mysql-for-python-in-windows
http://www.fuyun.org/2009/12/install-mysql-for-python-on-windows/

** html
http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page
* SNIPPETS
    # set all fields as non editable
    def get_field_attributes(self, field_name):
        field_attributes = super(EntityAdmin, self).get_field_attributes(field_name)
        field_attributes['editable'] = False
        return field_attributes

